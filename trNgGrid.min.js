"use strict";var TrNgGrid;(function(n){var t,o,c;(function(n){n[n.None=0]="None";n[n.SingleRow=1]="SingleRow";n[n.MultiRow=2]="MultiRow";n[n.MultiRowWithKeyModifiers=3]="MultiRowWithKeyModifiers"})(n.SelectionMode||(n.SelectionMode={}));t=n.SelectionMode;n.tableDirective="trNgGrid";n.gridConfigurationService=n.tableDirective+"Configuration";n.gridConfigurationProvider=n.gridConfigurationService+"Provider";n.sortFilter=n.tableDirective+"SortFilter";n.dataPagingFilter=n.tableDirective+"DataPagingFilter";n.translateFilter=n.tableDirective+"TranslateFilter";n.dataFormattingFilter=n.tableDirective+"DataFormatFilter";n.defaultTranslationLocale="default";var f="tr-ng-grid-body",e="field-name",a="is-customized",v="tr-ng-grid-footer-cell",y="tr-ng-grid-footer-cell-template";n.globalFilterDirectiveAttribute="tr-ng-grid-global-filter";o="trNgGridPager";n.pagerDirectiveAttribute="tr-ng-grid-pager";var s="trNgGridHeaderCell",p="tr-ng-grid-header-cell",w="tr-ng-grid-header-cell-template",h="trNgGridBodyCell",b="tr-ng-grid-body-cell",k="tr-ng-grid-body-cell-template";n.columnSortDirectiveAttribute="tr-ng-grid-column-sort";c="trNgGridColumnFilter";n.columnFilterDirectiveAttribute="tr-ng-grid-column-filter";var l=function(n,t){var r,i,u;for(t=t.toUpperCase(),r=n.children(),i=0;i<r.length;i++)if(u=r[i],u.tagName==t)return angular.element(u);return null},nt=function(n,t){var r,u,i,f;for(t=t.toUpperCase(),r=[],u=n.children(),i=0;i<u.length;i++)f=u[i],f.tagName==t&&r.push(angular.element(f));return r},i=function(n,t,i,r){var u=[],f=t.slice(0);return angular.forEach(n,function(n){for(var t=null,i=0;!t&&i<f.length;i++)t=f[i],t.fieldName===n.fieldName?f.splice(i,1):t=null;t?u.push(t):u.push(n)}),(i||r)&&angular.forEach(f,function(n){(i&&n.fieldName||r&&!n.fieldName)&&u.push(n)}),u},r=function(n,t,i,r){var u,f;i?(u=n.children(),u.length===1&&angular.element(u[0]).attr(r)||(f=angular.element("<div>"+n.html()+"<\/div>").attr(r,""),n.empty(),n.append(f))):(n.empty(),n.append(angular.element("<div><\/div>").attr(r,"")))},d=function(){function n(n,t){this.parent=n;this.cellElement=t;this.fieldName=t.attr(e);var i=t.children();this.isStandardColumn=i.length===0&&!t.html().replace(/^\s+|\s+$/gm,"")}return n}(),u=function(){function n(n,t,i,r,u){this.sectionTagName=n;this.sectionDirectiveAttribute=t;this.rowDirectiveAttribute=i;this.cellTagName=r;this.cellDirectiveAttribute=u;this.cellTagName=this.cellTagName.toUpperCase();this.cells=null}return n.prototype.configureSection=function(n,t){var r=this,u=this.getSectionElement(n,!0),f,o;return u.empty(),u.removeAttr("ng-non-bindable"),f=i(t,this.cells,!1,!1),o=this.getTemplatedRowElement(u,!0),angular.forEach(f,function(n,t){var i,u=n;i=u.parent===r&&u.cellElement?u.cellElement.clone(!0):angular.element("<table><"+r.cellTagName+"><\/"+r.cellTagName+"><\/table>").find(r.cellTagName);r.cellDirectiveAttribute&&i.attr(r.cellDirectiveAttribute,t);n.isStandardColumn||i.attr(a,"true");n.fieldName&&i.attr(e,n.fieldName);i.attr("ng-style","{'width':columnOptions.cellWidth,'height':columnOptions.cellHeight}");o.append(i)}),u},n.prototype.extractPartialColumnDefinitions=function(){return this.cells},n.prototype.discoverCells=function(n){var t=this,i;this.cells=[];i=this.getTemplatedRowElement(this.getSectionElement(n,!1),!1);i&&angular.forEach(i.children(),function(n){if(n=angular.element(n),n[0].tagName===t.cellTagName.toUpperCase()){var i=n.clone(!0);t.cells.push(new d(t,i))}})},n.prototype.getSectionElement=function(n,t){var i=null;return n&&(i=l(n,this.sectionTagName)),!i&&t&&(i=angular.element("<table><"+this.sectionTagName+"><\/"+this.sectionTagName+"><\/table>").find(this.sectionTagName),n&&n.append(i)),t&&this.sectionDirectiveAttribute&&i.attr(this.sectionDirectiveAttribute,""),i},n.prototype.getTemplatedRowElement=function(n,t){var i=null;return n&&(i=l(n,"tr")),!i&&t&&(i=angular.element("<table><tr><\/tr><\/table>").find("tr"),n&&n.append(i)),t&&this.rowDirectiveAttribute&&i.attr(this.rowDirectiveAttribute,""),i},n}(),g=function(){function r(n,t,i,r){this.$compile=n;this.$parse=t;this.$timeout=i;this.gridConfiguration=r}return r.prototype.setupScope=function(i,r,u){var f=this,e=angular.element(r).scope().$new(),o,s;return this.gridOptions={immediateDataRetrieval:!0,items:[],fields:null,locale:n.defaultTranslationLocale,selectedItems:[],filterBy:null,filterByFields:{},orderBy:null,orderByReverse:!1,pageItems:null,currentPage:0,totalItems:null,enableFiltering:!0,enableSorting:!0,selectionMode:t[2],onDataRequiredDelay:1e3,onDataRequired:u.onDataRequired?i.onDataRequired:null,gridColumnDefs:[]},e.gridOptions=this.gridOptions,e.TrNgGrid=n,this.linkScope(e,i,"gridOptions",u),this.gridOptions.onDataRequired&&(o=function(){f.dataRequestPromise=null;f.gridOptions.immediateDataRetrieval=!1;f.gridOptions.onDataRequired(f.gridOptions)},s=function(){f.dataRequestPromise&&(f.$timeout.cancel(f.dataRequestPromise),f.dataRequestPromise=null);f.gridOptions.immediateDataRetrieval?o():f.dataRequestPromise=f.$timeout(function(){o()},f.gridOptions.onDataRequiredDelay,!0)},e.$watch("gridOptions.currentPage",function(n,t){n!==t&&s()}),e.$watchCollection("[gridOptions.filterBy, gridOptions.filterByFields, gridOptions.orderBy, gridOptions.orderByReverse, gridOptions.pageItems, ]",function(){if(f.gridOptions.currentPage!==0){f.gridOptions.currentPage=0;return}s()}),e.$watch("gridOptions.immediateDataRetrieval",function(n){n&&f.dataRequestPromise&&(f.$timeout.cancel(f.dataRequestPromise),o())})),e.$watch("gridOptions.selectionMode",function(n,i){if(n!==i)switch(n){case t[0]:f.gridOptions.selectedItems.splice(0);break;case t[1]:f.gridOptions.selectedItems.length>1&&f.gridOptions.selectedItems.splice(1)}}),e},r.prototype.speedUpAsyncDataRetrieval=function(n){n&&n.keyCode!=13||(this.gridOptions.immediateDataRetrieval=!0)},r.prototype.setColumnOptions=function(n,t){var i=this.gridOptions.gridColumnDefs[n];if(!i)throw"Invalid grid column options found for column index "+n+". Please report this error.";t=angular.extend(t,i);this.gridOptions.gridColumnDefs[n]=t},r.prototype.toggleSorting=function(n){this.gridOptions.orderBy!=n?this.gridOptions.orderBy=n:this.gridOptions.orderByReverse=!this.gridOptions.orderByReverse;this.speedUpAsyncDataRetrieval()},r.prototype.getFormattedFieldName=function(n){return n.replace(/[\.\[\]]/g,"_")},r.prototype.setFilter=function(n,t){t?this.gridOptions.filterByFields[n]=t:delete this.gridOptions.filterByFields[n];this.gridOptions.filterByFields=angular.extend({},this.gridOptions.filterByFields)},r.prototype.toggleItemSelection=function(n,i,r){var h,f,c,e,l,o,s,u;if(this.gridOptions.selectionMode!==t[0])switch(this.gridOptions.selectionMode){case t[3]:if(r.ctrlKey||r.shiftKey||r.metaKey){if(r.ctrlKey||r.metaKey)u=this.gridOptions.selectedItems.indexOf(i),u>=0?this.gridOptions.selectedItems.splice(u,1):this.gridOptions.selectedItems.push(i);else if(r.shiftKey){for(document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&(h=window.getSelection(),h.removeAllRanges()),c=this.gridOptions.selectedItems[this.gridOptions.selectedItems.length-1],f=0;f<n.length&&n[f].$$_gridItem!==c;f++);for(f>=n.length&&(f=0),e=0;e<n.length&&n[e].$$_gridItem!==i;e++);if(e>=n.length)throw"Invalid selection on a key modifier selection mode";for(e<f&&(l=f,f=e,e=l),o=f;o<=e;o++)s=n[o].$$_gridItem,this.gridOptions.selectedItems.indexOf(s)<0&&this.gridOptions.selectedItems.push(s)}}else u=this.gridOptions.selectedItems.indexOf(i),this.gridOptions.selectedItems.splice(0),u<0&&this.gridOptions.selectedItems.push(i);break;case t[1]:u=this.gridOptions.selectedItems.indexOf(i);this.gridOptions.selectedItems.splice(0);u<0&&this.gridOptions.selectedItems.push(i);break;case t[2]:u=this.gridOptions.selectedItems.indexOf(i);u>=0?this.gridOptions.selectedItems.splice(u,1):this.gridOptions.selectedItems.push(i)}},r.prototype.discoverTemplates=function(n){this.templatedHeader=new u("thead",null,null,"th",p);this.templatedBody=new u("tbody",f,null,"td",b);this.templatedFooter=new u("tfoot",null,null,"td",v);this.templatedHeader.discoverCells(n);this.templatedFooter.discoverCells(n);this.templatedBody.discoverCells(n)},r.prototype.configureTableStructure=function(n,t,r){var h=this,e=n.$new(),v;t.empty();this.columnDefsItemsWatcherDeregistration&&(this.columnDefsItemsWatcherDeregistration(),this.columnDefsItemsWatcherDeregistration=null);this.columnDefsFieldsWatcherDeregistration&&(this.columnDefsFieldsWatcherDeregistration(),this.columnDefsFieldsWatcherDeregistration=null);this.columnDefsFieldsWatcherDeregistration=e.$watch("gridOptions.fields",function(i,r){angular.equals(i,r)||h.configureTableStructure(n,t,e)},!0);var c=this.templatedHeader.extractPartialColumnDefinitions(),l=this.templatedBody.extractPartialColumnDefinitions(),a=this.templatedFooter.extractPartialColumnDefinitions(),u=[],w=this.gridOptions.fields;if(w)angular.forEach(this.gridOptions.fields,function(n){n&&u.push({isStandardColumn:!0,fieldName:n})}),u=i(u,c,!1,!0),u=i(u,l,!1,!0);else if(c.length>0)u=i(c,l,!0,!0);else{if(!this.gridOptions.items||this.gridOptions.items.length==0){this.columnDefsItemsWatcherDeregistration=e.$watch("gridOptions.items.length",function(i){i&&h.configureTableStructure(n,t,e)});return}for(v in this.gridOptions.items[0])v.match(/^[_\$]/g)||u.push({isStandardColumn:!0,fieldName:v});u=i(u,l,!0,!0)}a.length==0&&a.push({isStandardColumn:!0});angular.forEach(u,function(n){n.fieldName&&(n.displayFieldName=h.getFormattedFieldName(n.fieldName))});this.gridOptions.gridColumnDefs=u;var y=this.templatedHeader.configureSection(t,u),p=this.templatedFooter.configureSection(t,a),o=this.templatedBody.configureSection(t,u),s=this.templatedBody.getTemplatedRowElement(o),b=this.templatedHeader.getTemplatedRowElement(y);o.attr(f,"");s.attr("ng-click","toggleItemSelection(gridItem, $event)");s.attr("ng-repeat","gridDisplayItem in filteredItems");s.attr("ng-init","gridItem=gridDisplayItem.$$_gridItem");s.attr("ng-class","{'"+this.gridConfiguration.styles.rowSelectedCssClass+"':gridOptions.selectedItems.indexOf(gridItem)>=0}");y.replaceWith(this.$compile(y)(e));p.replaceWith(this.$compile(p)(e));o.replaceWith(this.$compile(o)(e));r&&this.$timeout(function(){return r.$destroy()})},r.prototype.computeFormattedItems=function(n){var u=n.gridOptions.items||[],t,c,i,e,r,l,h,o,s,f;for(this.gridConfiguration.debugMode&&this.log("formatting items of length "+u.length),t=n.formattedItems=n.formattedItems||[],n.gridOptions.onDataRequired?n.filteredItems=t:n.requiresReFilteringTrigger=!n.requiresReFilteringTrigger,c=n.gridOptions.gridColumnDefs,i=0;i<u.length;i++){for(e=u[i],l={gridItem:e};t.length>u.length&&(r=t[i]).$$_gridItem!==e;)t.splice(i,1);for(i<t.length?(r=t[i],r.$$_gridItem!==e&&(r={$$_gridItem:e},t[i]=r)):(r={$$_gridItem:e},t.push(r)),h=0;h<c.length;h++)try{o=c[h];s=o.fieldName;s&&(f=o.displayFormat,f?(f[0]!="."&&f[0]!="|"&&(f=" | "+f),r[o.displayFieldName]=n.$eval("gridItem."+s+f,l)):r[o.displayFieldName]=n.$eval("gridItem."+s,l))}catch(a){this.gridConfiguration.debugMode&&this.log("Field evaluation failed for <"+s+"> with error "+a)}}t.length>u.length&&t.splice(u.length,t.length-u.length)},r.prototype.computeFilteredItems=function(t){if(t.filterByDisplayFields={},t.gridOptions.filterByFields)for(var i in t.gridOptions.filterByFields)t.filterByDisplayFields[this.getFormattedFieldName(i)]=t.gridOptions.filterByFields[i];this.gridConfiguration.debugMode&&this.log("filtering items of length "+(t.formattedItems?t.formattedItems.length:0));t.filteredItems=t.$eval("formattedItems | filter:gridOptions.filterBy | filter:filterByDisplayFields | "+n.sortFilter+":gridOptions | "+n.dataPagingFilter+":gridOptions")},r.prototype.setupDisplayItemsArray=function(n){var i=this,t="[gridOptions.items,gridOptions.gridColumnDefs.length";angular.forEach(n.gridOptions.gridColumnDefs,function(n){if(n.displayFormat&&n.displayFormat[0]!="."){var i=n.displayFormat.split("|");angular.forEach(i,function(n){var i=n.split(":");i.length>1&&angular.forEach(i.slice(1),function(n){n=n.trim();n&&n!=="gridItem"&&n!=="gridDisplayItem"&&(t+=","+n)})})}});t+="]";this.gridConfiguration.debugMode&&this.log("re-formatting is set to watch for changes in "+t);n.$watch(t,function(){return i.computeFormattedItems(n)},!0);n.gridOptions.onDataRequired||(t="[requiresReFilteringTrigger, gridOptions.filterBy, gridOptions.filterByFields, gridOptions.orderBy, gridOptions.orderByReverse, gridOptions.currentPage, gridOptions.pageItems]",n.$watch(t,function(){i.computeFilteredItems(n)},!0))},r.prototype.linkAttrs=function(n,t){var r=function(n,i){if(typeof i!="undefined"){switch(i){case"true":i=!0;break;case"false":i=!1}t[n]=i}};for(var i in t)r(i,n[i]),function(t){n.$observe(t,function(n){return r(t,n)})}(i)},r.prototype.linkScope=function(n,t,i,r){var o=this,f=n[i],u,s,h,e;for(u in f)if(s=typeof r[u]!="undefined"&&r[u]!=null,s){h=!1;typeof t[u]!="undefined"&&t[u]!=null&&(f[u]=t[u],h=f[u]instanceof Array);e=null;try{e=this.$parse(r[u])}catch(c){}(function(r,u){u&&u.constant||t.$watch(r,function(n){f[r]=n});var e=u&&u.assign?u.assign:null;e&&n.$watch(i+"."+r,function(n){try{t[r]=n}catch(i){if(o.gridConfiguration.debugMode){o.log("Mirroring the property on the external scope failed with "+i);throw i;}}})})(u,e)}},r.prototype.log=function(t){console.log(n.tableDirective+"("+(new Date).getTime()+"): "+t)},r}();angular.module(n.tableDirective,[]).directive(n.tableDirective,[n.gridConfigurationService,function(t){return{restrict:"A",scope:{items:"=",selectedItems:"=?",filterBy:"=?",filterByFields:"=?",orderBy:"=?",orderByReverse:"=?",pageItems:"=?",currentPage:"=?",totalItems:"=?",enableFiltering:"=?",enableSorting:"=?",enableSelections:"=?",enableMultiRowSelections:"=?",selectionMode:"@",locale:"@",onDataRequired:"&",onDataRequiredDelay:"=?",fields:"=?"},template:function(n){angular.forEach(n.children(),function(n){n=angular.element(n);n.attr("ng-non-bindable","")})},controller:["$compile","$parse","$timeout",n.gridConfigurationService,g],compile:function(){return{pre:function(n,i,r,u){i.addClass(t.styles.tableCssClass);u.discoverTemplates(i)},post:function(n,t,i,r){var u=r.setupScope(n,t,i);u.speedUpAsyncDataRetrieval=function(n){return r.speedUpAsyncDataRetrieval(n)};r.configureTableStructure(u,t);r.setupDisplayItemsArray(u)}}}}}]).directive(s,[n.gridConfigurationService,function(t){var i=function(n){if(n.columnOptions.displayName)n.columnTitle=n.columnOptions.displayName;else if(n.columnOptions.fieldName){var t=n.columnOptions.fieldName.match(/^[^\.\[\]]*/);t=t[0].split(/(?=[A-Z])/);t.length&&t[0].length&&(t[0]=t[0][0].toLocaleUpperCase()+t[0].substr(1));n.columnTitle=t.join(" ")}else n.columnTitle="[Invalid Field Name]"};return{restrict:"A",require:"^"+n.tableDirective,scope:!0,compile:function(n,u){var f=u.isCustomized=="true";return r(n,u,f,w),{pre:function(n,r,u,e){var h=parseInt(u[s]),o=angular.extend(n.gridOptions.gridColumnDefs[h],t.defaultColumnOptions);e.linkAttrs(u,o);n.columnOptions=o;n.isCustomized=f;n.toggleSorting=function(n){e.toggleSorting(n)};i(n);n.$watch("columnOptions.filter",function(n,t){n!==t&&e.setFilter(o.fieldName,n)})}}}}}]).directive("trNgGridHeaderCellTemplate",[n.gridConfigurationService,function(n){return{restrict:"A",template:n.templates.cellHeader,transclude:!0,replace:!0}}]).directive("trNgGridBody",[function(){return{restrict:"A",require:"^"+n.tableDirective,scope:!0,compile:function(){return{pre:function(n,t,i,r){n.toggleItemSelection=function(t,i){r.toggleItemSelection(n.filteredItems,t,i)}}}}}}]).directive(h,[function(){return{restrict:"A",require:"^"+n.tableDirective,scope:!0,compile:function(n,t){var i=t.isCustomized=="true";return r(n,t,i,k),{pre:function(n,t,r){n.columnOptions=n.gridOptions.gridColumnDefs[parseInt(r[h])];n.gridItem=n.gridDisplayItem.$$_gridItem;n.isCustomized=i}}}}}]).directive("trNgGridBodyCellTemplate",[n.gridConfigurationService,function(n){return{restrict:"A",template:n.templates.cellBody,transclude:!0,replace:!0}}]).directive("trNgGridFooterCell",[function(){return{restrict:"A",require:"^"+n.tableDirective,scope:!0,compile:function(n,t){var i=t.isCustomized=="true";return r(n,t,i,y),{pre:function(n,t){n.isCustomized=i;t.attr("colspan",n.gridOptions.gridColumnDefs.length)}}}}}]).directive("trNgGridFooterCellTemplate",[n.gridConfigurationService,function(n){return{restrict:"A",template:n.templates.cellFooter,transclude:!0,replace:!0}}]).directive("trNgGridColumnSort",[n.gridConfigurationService,function(n){return{restrict:"A",replace:!0,template:n.templates.columnSort}}]).directive(c,[n.gridConfigurationService,function(n){return{restrict:"A",replace:!0,template:n.templates.columnFilter}}]).directive("trNgGridGlobalFilter",[n.gridConfigurationService,function(n){return{restrict:"A",scope:!1,template:n.templates.footerGlobalFilter}}]).directive(o,[n.gridConfigurationService,function(t){var i=function(n){var f,i;if(n.totalItemsCount=typeof n.gridOptions.totalItems!="undefined"&&n.gridOptions.totalItems!=null?n.gridOptions.totalItems:n.gridOptions.items?n.gridOptions.items.length:0,n.isPaged=!!n.gridOptions.pageItems&&n.gridOptions.pageItems<n.totalItemsCount,n.extendedControlsActive=!1,n.lastPageIndex=!n.totalItemsCount||!n.isPaged?0:Math.floor(n.totalItemsCount/n.gridOptions.pageItems)+(n.totalItemsCount%n.gridOptions.pageItems?0:-1),n.gridOptions.currentPage>n.lastPageIndex&&(n.gridOptions.currentPage=n.lastPageIndex),n.startItemIndex=n.isPaged?n.gridOptions.pageItems*n.gridOptions.currentPage:0,n.endItemIndex=n.isPaged?n.startItemIndex+n.gridOptions.pageItems-1:n.totalItemsCount-1,n.endItemIndex>=n.totalItemsCount&&(n.endItemIndex=n.totalItemsCount-1),n.endItemIndex<n.startItemIndex&&(n.endItemIndex=n.startItemIndex),n.pageCanGoBack=n.isPaged&&n.gridOptions.currentPage>0,n.pageCanGoForward=n.isPaged&&n.gridOptions.currentPage<n.lastPageIndex,n.pageIndexes=n.pageIndexes||[],n.pageIndexes.splice(0),n.isPaged)if(n.lastPageIndex+1>t.pagerOptions.minifiedPageCountThreshold){n.extendedControlsActive=!0;var e=Math.floor(t.pagerOptions.minifiedPageCountThreshold/2),r=n.gridOptions.currentPage-e,u=n.gridOptions.currentPage+e;for(r<0?(u+=-r,r=0):u>n.lastPageIndex&&(r-=u-n.lastPageIndex,u=n.lastPageIndex),r>0&&(n.pageIndexes.push(null),r++),f=!1,u<n.lastPageIndex&&(f=!0,u--),i=r;i<=u;i++)n.pageIndexes.push(i);f&&n.pageIndexes.push(null)}else for(n.extendedControlsActive=!1,i=0;i<=n.lastPageIndex;i++)n.pageIndexes.push(i);n.pageSelectionActive=n.pageIndexes.length>1;n.navigateToPage=function(t){n.gridOptions.currentPage=t;n.speedUpAsyncDataRetrieval()};n.switchPageSelection=function(t,i){n.pageSelectionActive=i;t&&(t.preventDefault(),t.stopPropagation())}};return{restrict:"A",scope:!0,require:"^"+n.tableDirective,template:t.templates.footerPager,replace:!0,compile:function(){return{pre:function(n,t,r,u){i(n,u)},post:function(n,t,r,u){n.$watchCollection("[gridOptions.currentPage, gridOptions.items.length, gridOptions.totalItems, gridOptions.pageItems]",function(){i(n,u)})}}}}}]).filter(n.sortFilter,["$filter","$parse",function(n,t){return function(i,r){var u,f;if(!r.orderBy||!r.gridColumnDefs)return i;for(u=null,f=0;f<r.gridColumnDefs.length&&(u=r.gridColumnDefs[f]).fieldName!==r.orderBy;u=null,f++);return u?n("orderBy")(i,function(n){var i=undefined;try{i=t("item.$$_gridItem."+u.fieldName)({item:n})}catch(r){}if(i===undefined)try{i=t("item."+u.displayFieldName)({item:n})}catch(r){}return i},r.orderByReverse):i}}]).filter(n.dataPagingFilter,function(){return function(n,t){var i,r;return(n&&(t.totalItems=n.length),!t.pageItems||!n||n.length===0)?n:(t.currentPage||(t.currentPage=0),i=t.currentPage*t.pageItems,i>=n.length&&(t.currentPage=0,i=0),r=t.currentPage*t.pageItems+t.pageItems,n.slice(i,r))}}).filter(n.translateFilter,["$filter",n.gridConfigurationService,function(t,i){function r(t,r){for(var s,e,f=null,o=t.split(/[-_]/),u=o.length;u>=0&&!f;u--)s=u===0?n.defaultTranslationLocale:o.slice(0,u).join("-"),e=i.translations[s],e&&(f=r(e));return f}return function(n,i){var u,e,f;if(n instanceof Date)return e=r(i,function(n){return n.localeDateFormat}),t("date")(n,e);if(u=r(i,function(t){return t[n]}),!u)try{f=t("translate");f&&(u=f(n))}catch(o){}return u||(u=n),u}}])})(TrNgGrid||(TrNgGrid={})),function(n){var t=function(){function n(){this.minifiedPageCountThreshold=3}return n}(),i=function(){function n(){this.tableCssClass="tr-ng-grid table table-bordered table-hover";this.cellCssClass="tr-ng-cell";this.headerCellCssClass="tr-ng-cell tr-ng-column-header ";this.bodyCellCssClass="tr-ng-cell";this.columnTitleCssClass="tr-ng-title";this.columnSortCssClass="tr-ng-sort";this.columnFilterCssClass="tr-ng-column-filter";this.columnFilterInputWrapperCssClass="";this.columnSortActiveCssClass="tr-ng-sort-active text-info";this.columnSortInactiveCssClass="tr-ng-sort-inactive text-muted glyphicon glyphicon-chevron-down";this.columnSortReverseOrderCssClass="tr-ng-sort-order-reverse glyphicon glyphicon-chevron-down";this.columnSortNormalOrderCssClass="tr-ng-sort-order-normal glyphicon glyphicon-chevron-up";this.rowSelectedCssClass="active";this.footerCssClass="tr-ng-grid-footer form-inline"}return n}(),r=function(){function n(){this.cellWidth=null;this.cellHeight=null;this.displayAlign="left";this.displayFormat=null;this.displayName=null;this.filter=null;this.enableFiltering=null;this.enableSorting=null}return n}(),u=function(){function t(t,i){var r=t.startSymbol(),u=t.endSymbol();this.cellHeader='<div class="'+i.headerCellCssClass+'" ng-switch="isCustomized">  <div ng-switch-when="true">    <div ng-transclude=""><\/div>  <\/div>  <div ng-switch-default>    <div class="'+i.columnTitleCssClass+'">      {{columnTitle |'+n.translateFilter+":gridOptions.locale}}       <div "+n.columnSortDirectiveAttribute+'=""><\/div>    <\/div>    <div '+n.columnFilterDirectiveAttribute+'=""><\/div>  <\/div><\/div>';this.cellBody='<div ng-attr-class="'+i.bodyCellCssClass+' text-{{columnOptions.displayAlign}}" ng-switch="isCustomized">  <div ng-switch-when="true">    <div ng-transclude=""><\/div>  <\/div>  <div ng-switch-default>{{gridDisplayItem[columnOptions.displayFieldName]}}<\/div><\/div>';this.cellFooter='<div class="'+i.footerCssClass+'" ng-switch="isCustomized">  <div ng-switch-when="true">    <div ng-transclude=""><\/div>  <\/div>  <div ng-switch-default>    <span '+n.globalFilterDirectiveAttribute+'=""><\/span>    <span '+n.pagerDirectiveAttribute+'=""><\/span>  <\/div><\/div>';this.columnFilter='<div ng-show="(gridOptions.enableFiltering&&columnOptions.enableFiltering!==false)||columnOptions.enableFiltering" class="'+i.columnFilterCssClass+'"> <div class="'+i.columnFilterInputWrapperCssClass+'">   <input class="form-control input-sm" type="text" ng-model="columnOptions.filter" ng-keypress="speedUpAsyncDataRetrieval($event)"><\/input> <\/div><\/div>';this.columnSort="<div ng-attr-title=\"{{'Sort'|"+n.translateFilter+':gridOptions.locale}}" ng-show="(gridOptions.enableSorting&&columnOptions.enableSorting!==false)||columnOptions.enableSorting" ng-click="toggleSorting(columnOptions.fieldName)" class="'+i.columnSortCssClass+'" >   <div ng-class="{\''+i.columnSortActiveCssClass+"':gridOptions.orderBy==columnOptions.fieldName,'"+i.columnSortInactiveCssClass+"':gridOptions.orderBy!=columnOptions.fieldName,'"+i.columnSortNormalOrderCssClass+"':gridOptions.orderBy==columnOptions.fieldName&&!gridOptions.orderByReverse,'"+i.columnSortReverseOrderCssClass+"':gridOptions.orderBy==columnOptions.fieldName&&gridOptions.orderByReverse}\" >  <\/div><\/div>";this.footerGlobalFilter='<span ng-show="gridOptions.enableFiltering" class="pull-left form-group">  <input class="form-control" type="text" ng-model="gridOptions.filterBy" ng-keypress="speedUpAsyncDataRetrieval($event)" ng-attr-placeholder="{{\'Search\'|'+n.translateFilter+':gridOptions.locale}}"><\/input><\/span>';this.footerPager='<span class="pull-right form-group"> <ul class="pagination">   <li ng-class="{disabled:!pageCanGoBack}" ng-if="extendedControlsActive">     <a href="" ng-click="pageCanGoBack&&navigateToPage(0)" ng-attr-title="{{\'First Page\'|'+n.translateFilter+':gridOptions.locale}}">         <span>&laquo;<\/span>     <\/a>   <\/li>   <li ng-class="{disabled:!pageCanGoBack}" ng-if="extendedControlsActive">     <a href="" ng-click="pageCanGoBack&&navigateToPage(gridOptions.currentPage - 1)" ng-attr-title="{{\'Previous Page\'|'+n.translateFilter+':gridOptions.locale}}">         <span>&lsaquo;<\/span>     <\/a>   <\/li>   <li ng-if="pageSelectionActive" ng-repeat="pageIndex in pageIndexes track by $index" ng-class="{disabled:pageIndex===null, active:pageIndex===gridOptions.currentPage}">      <span ng-if="pageIndex===null">...<\/span>      <a href="" ng-click="navigateToPage(pageIndex)" ng-if="pageIndex!==null" ng-attr-title="{{\'Page\'|'+n.translateFilter+':gridOptions.locale}}">{{pageIndex+1}}<\/a>   <\/li>   <li ng-class="{disabled:!pageCanGoForward}" ng-if="extendedControlsActive">     <a href="" ng-click="pageCanGoForward&&navigateToPage(gridOptions.currentPage + 1)" ng-attr-title="{{\'Next Page\'|'+n.translateFilter+':gridOptions.locale}}">         <span>&rsaquo;<\/span>     <\/a>   <\/li>   <li ng-class="{disabled:!pageCanGoForward}" ng-if="extendedControlsActive">     <a href="" ng-click="pageCanGoForward&&navigateToPage(lastPageIndex)" ng-attr-title="{{\'Last Page\'|'+n.translateFilter+':gridOptions.locale}}">         <span>&raquo;<\/span>     <\/a>   <\/li>   <li class="disabled" style="white-space: nowrap;">     <span ng-hide="totalItemsCount">{{\'No items to display\'|'+n.translateFilter+":gridOptions.locale}}<\/span>     <span ng-show=\"totalItemsCount\">       {{startItemIndex+1}} - {{endItemIndex+1}} {{'displayed'|"+n.translateFilter+":gridOptions.locale}}       <span>, {{totalItemsCount}} {{'in total'|"+n.translateFilter+":gridOptions.locale}}<\/span>     <\/span >    <\/li> <\/ul><\/span>"}return t}(),f=function(){function f(n){var t=this;this.$interpolateProvider=n;this.$get=[function(){return{styles:t.styles(),defaultColumnOptions:t.defaultColumnOptions(),translations:t.gridTranslations,pagerOptions:t.pagerOptions(),templates:t.templates(),debugMode:t.debugMode()}}];this.gridTranslations={};this.gridDebugMode=!1}return f.prototype.styles=function(n){return n&&(this.gridStyles=angular.extend({},new i,n)),this.gridStyles||new i},f.prototype.defaultColumnOptions=function(n){return n&&(this.gridDefaultColumnOptions=angular.extend({},new r,n)),this.gridDefaultColumnOptions||new r},f.prototype.translations=function(n,t){return this.gridTranslations[n]=angular.extend({},this.gridTranslations[n],t)},f.prototype.defaultTranslations=function(t){return this.translations(n.defaultTranslationLocale,t)},f.prototype.pagerOptions=function(n){return n&&(this.gridPagerOptions=angular.extend({},new t,n)),this.gridPagerOptions||new t},f.prototype.templates=function(n){return n&&(this.gridTemplates=angular.extend({},new u(this.$interpolateProvider,this.styles()),n)),this.gridTemplates||new u(this.$interpolateProvider,this.styles())},f.prototype.debugMode=function(n){return n!==undefined&&(this.gridDebugMode=!!n),this.gridDebugMode},f}();n.GridConfigurationProvider=f;angular.module(n.tableDirective).provider(n.gridConfigurationService,f)}(TrNgGrid||(TrNgGrid={}));