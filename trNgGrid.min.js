var TrNgGrid;(function(n){var t;(function(n){n.tableDirective="trNgGrid";n.tableDirectiveAttribute="data-tr-ng-grid";n.dataColumnIsAutoGeneratedAttribute=n.tableDirectiveAttribute+"-auto-generated";n.dataColumnIsAutoGeneratedField=n.tableDirective+"AutoGenerated";n.dataColumnIsCustomizedAttribute=n.tableDirectiveAttribute+"-customized";n.dataColumnIsCustomizedField=n.tableDirective+"Customized";n.dataColumnRowIndexAttribute=n.tableDirectiveAttribute+"-row-index";n.dataColumnRowIndexField=n.tableDirective+"RowIndex";n.dataColumnBatchIndexAttribute=n.tableDirectiveAttribute+"-batch-index";n.dataColumnBatchIndexField=n.tableDirective+"BatchIndex";n.sortFilter=n.tableDirective+"SortFilter";n.dataPagingFilter=n.tableDirective+"DataPagingFilter";n.translateFilter=n.tableDirective+"TranslateFilter";n.dataFormattingFilter=n.tableDirective+"DataFormatFilter";n.defaultTranslationLocale="default";n.bodyDirective=n.tableDirective+"Body";n.bodyDirectiveAttribute=n.tableDirectiveAttribute+"-body";n.headerDirective=n.tableDirective+"Header";n.headerDirectiveAttribute=n.tableDirectiveAttribute+"-header";n.footerDirective=n.tableDirective+"Footer";n.footerDirectiveAttribute=n.tableDirectiveAttribute+"-footer";n.cellFooterDirective=n.tableDirective+"FooterCell";n.cellFooterDirectiveAttribute=n.tableDirectiveAttribute+"-footer-cell";n.cellFooterTemplateDirective=n.tableDirective+"FooterCellTemplate";n.cellFooterTemplateDirectiveAttribute=n.tableDirectiveAttribute+"-footer-cell-template";n.globalFilterDirective=n.tableDirective+"GlobalFilter";n.globalFilterDirectiveAttribute=n.tableDirectiveAttribute+"-global-filter";n.pagerDirective=n.tableDirective+"Pager";n.pagerDirectiveAttribute=n.tableDirectiveAttribute+"-pager";n.cellHeaderDirective=n.tableDirective+"HeaderCell";n.cellHeaderDirectiveAttribute=n.tableDirectiveAttribute+"-header-cell";n.cellHeaderTemplateDirective=n.tableDirective+"HeaderCellTemplate";n.cellHeaderTemplateDirectiveAttribute=n.tableDirectiveAttribute+"-header-cell-template";n.cellBodyDirective=n.tableDirective+"BodyCell";n.cellBodyDirectiveAttribute=n.tableDirectiveAttribute+"-body-cell";n.cellBodyTemplateDirective=n.tableDirective+"BodyCellTemplate";n.cellBodyTemplateDirectiveAttribute=n.tableDirectiveAttribute+"-body-cell-template";n.columnSortDirective=n.tableDirective+"ColumnSort";n.columnSortDirectiveAttribute=n.tableDirectiveAttribute+"-column-sort";n.columnFilterDirective=n.tableDirective+"ColumnFilter";n.columnFilterDirectiveAttribute=n.tableDirectiveAttribute+"-column-filter";n.gridConfigurationService=n.tableDirective+"Configuration";n.gridConfigurationProvider=n.gridConfigurationService+"Provider"})(t=n.Constants||(n.Constants={}))})(TrNgGrid||(TrNgGrid={})),function(n){function t(n,t){var r,i,u;for(t=t.toUpperCase(),r=n.children(),i=0;i<r.length;i++)if(u=r[i],u.tagName===t)return angular.element(u);return null}function s(n){for(var r=n.parent(),i=r.children(),t=0;t<i.length&&i[t]===n[0];t++);return t>=i.length?-1:t}function r(n,t){var r,u,i,f;for(t=t.toUpperCase(),r=[],u=n.children(),i=0;i<u.length;i++)f=u[i],f.tagName===t&&r.push(angular.element(f));return r}function h(n,t){var i=n.children(),r;i.length===1&&angular.element(i[0]).attr(t)||(r=angular.element("<div>"+n.html()+"<\/div>").attr(t,""),n.empty(),n.append(r))}function u(t){console.log(n.Constants.tableDirective+"("+(new Date).getTime()+"): "+t)}function f(){return t(t(angular.element("<table><tbody><tr><\/tr><\/tbody><\/table>"),"tbody"),"tr")}function e(n){return t(t(t(angular.element("<table><tbody><tr><"+n+"><\/"+n+"><\/tr><\/tbody><\/table>"),"tbody"),"tr"),n)}function i(t,i,r,u,f,o){var s,h,c;return i||(i=e(r),i.attr(n.Constants.dataColumnIsAutoGeneratedAttribute,"true")),i.attr(u,""),i.attr(n.Constants.dataColumnRowIndexAttribute,f),i.attr(n.Constants.dataColumnBatchIndexAttribute,o),s=i.children(),h=s.length||i.html().replace(/^\s+|\s+$/gm,""),h&&s.length===0&&(c=angular.element("<div>"+i.html()+"<\/div>"),i.empty(),i.append(c)),h&&i.attr(n.Constants.dataColumnIsCustomizedAttribute,"true"),i}function o(t,u,e,o){var h,a=r(u,"tr"),s,v,y,l,c;for(a.length||(u.empty(),h=f(),u.append(h),a.push(h)),s=0;s<a.length;s++)if(h=a[s],l=r(h,"th"),!(l.length>0)||!l[0].attr(n.Constants.dataColumnIsAutoGeneratedAttribute))for(y=i(t,null,e,o,s,0),h.prepend(y),c=0;c<l.length;c++)v=l[c],v=i(t,v,e,o,s,(c<<1)+1),y=i(t,null,e,o,s,c+1<<1),v.after(y)}function c(i,r){var f=t(r,"thead"),e,s;f||(f=t(angular.element("<table><thead><\/thead><\/table"),"thead"),r.prepend(f));f.attr(n.Constants.headerDirectiveAttribute,"");o(i,f,"th",n.Constants.cellHeaderDirectiveAttribute);e=t(r,"tfoot");e||(e=t(angular.element("<table><tfoot><\/tfoot><\/table"),"tfoot"),f.after(e));s=t(r,"tbody");s||(s=t(angular.element("<table><tbody><\/tbody><\/table"),"tbody"),e.after(s));angular.forEach(r.children,function(n){(n!==f[0]||n!==s[0]||n!==e[0])&&(angular.element(n).remove(),i.debugMode&&u("Invalid extra element found inside the grid template structure: "+n.tagName))})}n.findChildByTagName=t;n.findChildIndex=s;n.findChildrenByTagName=r;n.wrapTemplatedCell=h;n.log=u;n.createRowElement=f;n.createCellElement=e;n.fixGridCell=i;n.fixGridSection=o;n.fixTableStructure=c}(TrNgGrid||(TrNgGrid={})),function(n){var r=0,t,u,i;(function(n){n[n.None=0]="None";n[n.SingleRow=1]="SingleRow";n[n.MultiRow=2]="MultiRow";n[n.MultiRowWithKeyModifiers=3]="MultiRowWithKeyModifiers"})(n.SelectionMode||(n.SelectionMode={}));t=n.SelectionMode,function(n){n[n.Enforced=0]="Enforced";n[n.Header=1]="Header";n[n.Body=2]="Body"}(n.GridEntitySection||(n.GridEntitySection={}));u=n.GridEntitySection;i=function(){function n(n,t,i,r){this.$compile=n;this.$parse=t;this.$timeout=i;this.gridConfiguration=r;this.gridSections=new Array(3);this.gridColumns={}}return n.prototype.setOptions=function(n){var i=this,r,u;this.gridOptions=n;this.gridOptions.onDataRequired&&(r=function(){i.dataRequestPromise=null;i.gridOptions.immediateDataRetrieval=!1;i.gridOptions.onDataRequired(i.gridOptions)},u=function(){i.dataRequestPromise&&(i.$timeout.cancel(i.dataRequestPromise),i.dataRequestPromise=null);i.gridOptions.immediateDataRetrieval?r():i.dataRequestPromise=i.$timeout(function(){r()},i.gridOptions.onDataRequiredDelay,!0)},this.gridOptions.$watch("gridOptions.currentPage",function(n,t){n!==t&&u()}),this.gridOptions.$watchCollection("[gridOptions.filterBy, gridOptions.filterByFields, gridOptions.orderBy, gridOptions.orderByReverse, gridOptions.pageItems, ]",function(){if(i.gridOptions.currentPage!==0){i.gridOptions.currentPage=0;return}u()}),this.gridOptions.$watch("gridOptions.immediateDataRetrieval",function(n){n&&i.dataRequestPromise&&(i.$timeout.cancel(i.dataRequestPromise),r())}));this.gridOptions.$watch("gridOptions.selectionMode",function(n,r){if(n!==r)switch(n){case t[0]:i.gridOptions.selectedItems.splice(0);break;case t[1]:i.gridOptions.selectedItems.length>1&&i.gridOptions.selectedItems.splice(1)}})},n.prototype.speedUpAsyncDataRetrieval=function(n){n&&n.keyCode!=13||(this.gridOptions.immediateDataRetrieval=!0)},n.prototype.removeColumn=function(n,t){var u,f,i,r;if(t.fieldName&&(u=n<this.gridSections.length?this.gridSections[n]:null,u)&&(f=t.rowIndex<u.rows.length?u.rows[t.rowIndex]:null,f)&&(i=t.batchIndex<f.columnBatches.length?f.columnBatches[t.batchIndex]:null,i))for(r=0;r<i.columns.length;r++)if(i.columns[r].identity.fieldName===t.fieldName){i.columns.splice(r,1);return}},n.prototype.setColumn=function(n,t,i){var f,o,s,e,u,h;for(t.fieldName=t.fieldName||"trNgGridCustomField_"+r++,f=this.gridSections[n],f||(this.gridSections[n]=f={rows:[]});f.rows.length<=t.rowIndex;)f.rows.push({columnBatches:[]});for(o=f.rows[t.rowIndex];o.columnBatches.length<=t.batchIndex;)o.columnBatches.push({columns:[]});for(s=o.columnBatches[t.batchIndex],e=this.gridColumns[t.fieldName],e?i&&(this.gridColumns[t.fieldName]=e=angular.extend(i,this.gridConfiguration.defaultColumnOptions)):this.gridColumns[t.fieldName]=e=angular.extend(i||{},this.gridConfiguration.defaultColumnOptions),u=null,h=0;h<s.columns.length&&!u;h++)u=s.columns[h],u.identity.fieldName!==t.fieldName&&(u=null);return u?u.options=e:(u={identity:t,options:e},s.columns.push(u)),u},n.prototype.toggleSorting=function(n){this.gridOptions.orderBy!=n?this.gridOptions.orderBy=n:this.gridOptions.orderByReverse=!this.gridOptions.orderByReverse;this.speedUpAsyncDataRetrieval()},n.prototype.getFormattedFieldName=function(){},n.prototype.setFilter=function(){},n.prototype.toggleItemSelection=function(n,i,r){var h,f,c,e,l,o,s,u;if(this.gridOptions.selectionMode!==t[0])switch(this.gridOptions.selectionMode){case t[3]:if(r.ctrlKey||r.shiftKey||r.metaKey){if(r.ctrlKey||r.metaKey)u=this.gridOptions.selectedItems.indexOf(i),u>=0?this.gridOptions.selectedItems.splice(u,1):this.gridOptions.selectedItems.push(i);else if(r.shiftKey){for(document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&(h=window.getSelection(),h.removeAllRanges()),c=this.gridOptions.selectedItems[this.gridOptions.selectedItems.length-1],f=0;f<n.length&&n[f].trNgGridDataItem!==c;f++);for(f>=n.length&&(f=0),e=0;e<n.length&&n[e].trNgGridDataItem!==i;e++);if(e>=n.length)throw"Invalid selection on a key modifier selection mode";for(e<f&&(l=f,f=e,e=l),o=f;o<=e;o++)s=n[o].trNgGridDataItem,this.gridOptions.selectedItems.indexOf(s)<0&&this.gridOptions.selectedItems.push(s)}}else u=this.gridOptions.selectedItems.indexOf(i),this.gridOptions.selectedItems.splice(0),u<0&&this.gridOptions.selectedItems.push(i);break;case t[1]:u=this.gridOptions.selectedItems.indexOf(i);this.gridOptions.selectedItems.splice(0);u<0&&this.gridOptions.selectedItems.push(i);break;case t[2]:u=this.gridOptions.selectedItems.indexOf(i);u>=0?this.gridOptions.selectedItems.splice(u,1):this.gridOptions.selectedItems.push(i)}},n.prototype.computeFormattedItems=function(){},n.prototype.computeFilteredItems=function(){},n.prototype.setupDisplayItemsArray=function(){},n}();n.GridController=i;n.gridModule=angular.module(n.Constants.tableDirective,[]);n.gridModule.directive(n.Constants.tableDirective,[n.Constants.gridConfigurationService,function(t){return{restrict:"A",scope:{items:"=",selectedItems:"=?",filterBy:"=?",filterByFields:"=?",orderBy:"=?",orderByReverse:"=?",pageItems:"=?",currentPage:"=?",totalItems:"=?",enableFiltering:"=?",enableSorting:"=?",selectionMode:"@",locale:"@",onDataRequired:"&",onDataRequiredDelay:"=?",fields:"=?"},controller:["$compile","$parse","$timeout",n.Constants.gridConfigurationService,i],compile:function(i){return n.fixTableStructure(t,i),{pre:function(n,t,i,r){r.setOptions(n)}}}}}])}(TrNgGrid||(TrNgGrid={})),function(n){n.gridModule.directive(n.Constants.headerDirective,[function(){return{restrict:"A",require:"^"+n.Constants.tableDirective,link:{pre:function(n,t,i,r){n.grid=r;n.gridOptions=r.gridOptions}}}}]);n.gridModule.directive(n.Constants.cellHeaderDirective,[function(){return{restrict:"A",require:"^"+n.Constants.tableDirective,transclude:!0,scope:{rowIndex:"@"+n.Constants.dataColumnRowIndexField,batchIndex:"@"+n.Constants.dataColumnBatchIndexField,isCustomized:"@"+n.Constants.dataColumnIsCustomizedField,isAutoGenerated:"@"+n.Constants.dataColumnIsAutoGeneratedField,fieldName:"@",displayName:"@",displayAlign:"@",displayFormat:"@",enableSorting:"@",enableFiltering:"@",cellWidth:"@",cellHeight:"@",filter:"@"},compile:function(){var t=null;return{pre:function(i,r,u,f,e){i.displayFieldName=i.fieldName?i.fieldName.replace(/[\.\[\]]/g,"_"):null;t=f.setColumn(n.GridEntitySection.Header,{fieldName:i.fieldName,batchIndex:i.batchIndex,rowIndex:i.rowIndex,isAutoGenerated:i.isAutoGenerated,isCustomized:i.isCustomized},i);i.$watch("displayName",function(){var i,n;t.options.displayName?i=t.options.displayName:t.identity.fieldName?(n=t.identity.fieldName.match(/^[^\.\[\]]*/),n=n[0].split(/(?=[A-Z])/),n.length&&n[0].length&&(n[0]=n[0][0].toLocaleUpperCase()+n[0].substr(1)),i=n.join(" ")):i="[Invalid Field Name]";t.options.columnTitle=i});e(function(n,i){i.gridColumnOptions=t.options;r.replaceWith(n)});f.removeColumn(n.GridEntitySection.Header,t.identity)},post:function(){}}}}}])}(TrNgGrid||(TrNgGrid={})),function(n){var t=function(){function n(){this.minifiedPageCountThreshold=3}return n}(),i=function(){function n(){this.tableCssClass="tr-ng-grid table table-bordered table-hover ";this.cellCssClass="tr-ng-cell ";this.headerCellCssClass="tr-ng-cell tr-ng-column-header ";this.bodyCellCssClass="tr-ng-cell ";this.columnTitleCssClass="tr-ng-title ";this.columnSortCssClass="tr-ng-sort pull-right pull-top ";this.columnFilterInputWrapperCssClass=" ";this.columnFilterCssClass="tr-ng-column-filter ";this.columnSortActiveCssClass="tr-ng-sort-active text-info ";this.columnSortInactiveCssClass="tr-ng-sort-inactive text-muted glyphicon glyphicon-chevron-down ";this.columnSortReverseOrderCssClass="tr-ng-sort-order-reverse glyphicon glyphicon-chevron-down ";this.columnSortNormalOrderCssClass="tr-ng-sort-order-normal glyphicon glyphicon-chevron-up ";this.rowSelectedCssClass="active ";this.footerCssClass="tr-ng-grid-footer form-inline "}return n}(),r=function(){function n(){this.displayAlign="left"}return n}(),u=function(){function t(t,i){var r=t.startSymbol(),u=t.endSymbol();this.cellHeader='<div class="'+i.headerCellCssClass+'" >  <div ng-if="isCustomized" ng-transclude=""><\/div>  <div ng-if="!isCustomized" '+n.Constants.columnSortDirectiveAttribute+'=""><\/div>  <a ng-if="!isCustomized" class="'+i.columnTitleCssClass+'"     href="" ng-click="((gridOptions.enableSorting&&columnOptions.enableSorting!==false)||columnOptions.enableSorting)&&toggleSorting(columnOptions.fieldName)">      {{columnTitle |'+n.Constants.translateFilter+':gridOptions.locale}}  <\/a>  <div ng-if="!isCustomized" '+n.Constants.columnFilterDirectiveAttribute+'=""><\/div><\/div>';this.cellBody='<div ng-attr-class="'+i.bodyCellCssClass+' text-{{columnOptions.displayAlign}}" ng-switch="isCustomized">  <div ng-switch-when="true">    <div ng-transclude=""><\/div>  <\/div>  <div ng-switch-default>{{gridDisplayItem[columnOptions.displayFieldName]}}<\/div><\/div>';this.cellFooter='<div class="'+i.footerCssClass+'" ng-switch="isCustomized">  <div ng-switch-when="true">    <div ng-transclude=""><\/div>  <\/div>  <div ng-switch-default>    <span '+n.Constants.globalFilterDirectiveAttribute+'=""><\/span>    <span '+n.Constants.pagerDirectiveAttribute+'=""><\/span>  <\/div><\/div>';this.columnFilter='<div ng-show="(gridOptions.enableFiltering&&columnOptions.enableFiltering!==false)||columnOptions.enableFiltering" class="'+i.columnFilterCssClass+'"> <div class="'+i.columnFilterInputWrapperCssClass+'">   <input class="form-control input-sm" type="text" ng-model="columnOptions.filter" ng-keypress="speedUpAsyncDataRetrieval($event)"><\/input> <\/div><\/div>';this.columnSort='<a href="" ng-attr-title="{{\'Sort\'|'+n.Constants.translateFilter+':gridOptions.locale}}" ng-show="(gridOptions.enableSorting&&columnOptions.enableSorting!==false)||columnOptions.enableSorting" ng-click="toggleSorting(columnOptions.fieldName)" class="'+i.columnSortCssClass+'" >   <span ng-class="{\''+i.columnSortActiveCssClass+"':gridOptions.orderBy==columnOptions.fieldName,'"+i.columnSortInactiveCssClass+"':gridOptions.orderBy!=columnOptions.fieldName,'"+i.columnSortNormalOrderCssClass+"':gridOptions.orderBy==columnOptions.fieldName&&!gridOptions.orderByReverse,'"+i.columnSortReverseOrderCssClass+"':gridOptions.orderBy==columnOptions.fieldName&&gridOptions.orderByReverse}\" >  <\/span><\/a>";this.footerGlobalFilter='<span ng-show="gridOptions.enableFiltering" class="pull-left form-group">  <input class="form-control" type="text" ng-model="gridOptions.filterBy" ng-keypress="speedUpAsyncDataRetrieval($event)" ng-attr-placeholder="{{\'Search\'|'+n.Constants.translateFilter+':gridOptions.locale}}"><\/input><\/span>';this.footerPager='<span class="pull-right form-group"> <ul class="pagination">   <li ng-class="{disabled:gridOptions.currentPage==0}" ng-if="isPaged&&!pageRangeFullCoverage">     <a href="" ng-click="gridOptions.currentPage!=0&&navigateToPage(0)" ng-attr-title="{{\'First Page\'|'+n.Constants.translateFilter+':gridOptions.locale}}">         <span>&laquo;<\/span>     <\/a>   <\/li>   <li ng-class="{disabled:gridOptions.currentPage==0}" ng-if="isPaged&&!pageRangeFullCoverage">     <a href="" ng-click="gridOptions.currentPage!=0&&navigateToPage(gridOptions.currentPage - 1)" ng-attr-title="{{\'Previous Page\'|'+n.Constants.translateFilter+':gridOptions.locale}}">         <span>&lsaquo;<\/span>     <\/a>   <\/li>   <li ng-if="isPaged&&!pageRangeFullCoverage&&visiblePageRange[0]!=0"class="disabled">      <span>...<\/span>   <\/li>   <li ng-if="isPaged" ng-repeat="pageIndex in visiblePageRange track by $index" ng-class="{active:pageIndex===gridOptions.currentPage}">      <a href="" ng-click="navigateToPage(pageIndex)" ng-attr-title="{{\'Page\'|'+n.Constants.translateFilter+':gridOptions.locale}}">{{pageIndex+1}}<\/a>   <\/li>   <li ng-if="isPaged&&!pageRangeFullCoverage&&visiblePageRange[visiblePageRange.length-1]!=lastPage" class="disabled">      <span>...<\/span>   <\/li>   <li ng-class="{disabled:gridOptions.currentPage==lastPage}" ng-if="isPaged&&!pageRangeFullCoverage">     <a href="" ng-click="gridOptions.currentPage!=lastPage&&navigateToPage(gridOptions.currentPage + 1)" ng-attr-title="{{\'Next Page\'|'+n.Constants.translateFilter+':gridOptions.locale}}">         <span>&rsaquo;<\/span>     <\/a>   <\/li>   <li ng-class="{disabled:gridOptions.currentPage==lastPage}" ng-if="isPaged&&!pageRangeFullCoverage">     <a href="" ng-click="gridOptions.currentPage!=lastPage&&navigateToPage(lastPage)" ng-attr-title="{{\'Last Page\'|'+n.Constants.translateFilter+':gridOptions.locale}}">         <span>&raquo;<\/span>     <\/a>   <\/li>   <li class="disabled" style="white-space: nowrap;">     <span ng-hide="totalItemsCount">{{\'No items to display\'|'+n.Constants.translateFilter+":gridOptions.locale}}<\/span>     <span ng-show=\"totalItemsCount\">       {{visibleStartItemIndex+1}} - {{visibleEndItemIndex+1}} {{'displayed'|"+n.Constants.translateFilter+":gridOptions.locale}}       <span>, {{totalItemsCount}} {{'in total'|"+n.Constants.translateFilter+":gridOptions.locale}}<\/span>     <\/span >    <\/li> <\/ul><\/span>"}return t}(),f=function(){function f(n){var t=this;this.$interpolateProvider=n;this.$get=[function(){return{styles:t.styles(),defaultColumnOptions:t.defaultColumnOptions(),translations:t.gridTranslations,pagerOptions:t.pagerOptions(),templates:t.templates(),debugMode:t.debugMode()}}];this.gridTranslations={};this.gridDebugMode=!1}return f.prototype.styles=function(n){return n&&(this.gridStyles=angular.extend({},new i,n)),angular.extend({},this.gridStyles||new i)},f.prototype.defaultColumnOptions=function(n){return n&&(this.gridDefaultColumnOptions=angular.extend({},new r,n)),angular.extend({},this.gridDefaultColumnOptions||new r)},f.prototype.translations=function(n,t){var i=this.gridTranslations[n]=angular.extend({},this.gridTranslations[n],t);return angular.extend({},i)},f.prototype.defaultTranslations=function(t){return this.translations(n.Constants.defaultTranslationLocale,t)},f.prototype.pagerOptions=function(n){return n&&(this.gridPagerOptions=angular.extend({},new t,n)),angular.extend({},this.gridPagerOptions||new t)},f.prototype.templates=function(n){return n&&(this.gridTemplates=angular.extend({},new u(this.$interpolateProvider,this.styles()),n)),angular.extend({},this.gridTemplates||new u(this.$interpolateProvider,this.styles()))},f.prototype.debugMode=function(n){return n!==undefined&&(this.gridDebugMode=!!n),this.gridDebugMode},f}();angular.module(n.Constants.tableDirective).provider(n.Constants.gridConfigurationService,f)}(TrNgGrid||(TrNgGrid={}));